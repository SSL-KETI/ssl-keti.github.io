<!DOCTYPE HTML>
<!--
	Alpha by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>SSL</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	</head>
	<body class="landing is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<header id="header">
					<h1><a href="index.html">SSL</a></h1>
					<nav id="nav">
						<ul>
							<li><a href="index.html">과제 개요</a></li>
							<li><a href="results.html">결과물</a></li>
							<li>
								<a href="demo1.html" class="icon solid fa-angle-down">통합 시연</a>
								<ul>
									<li><a href="demo1.html#box1">Part 1</a></li>
									<li><a href="demo1.html#box2">Part 2</a></li>
									<li><a href="demo1.html#box3">Part 3</a></li>
									<li><a href="demo1.html#box4">Part 4</a></li>
								</ul>
							</li>
							<li><a href="demo2.html">개별 시연</a></li>
						</ul>
					</nav>
				</header>


			<!-- Banner -->
				<section id="banner">
					<!--
					<h2>Alpha</h2>
					<p>Another fine responsive site template freebie by HTML5 UP.</p> -->
					<h5>정보통신⦁방송 기술개발사업<br/>
						차세대 인공지능 핵심원천기술개발<h5>
					<h3>자기지도학습에 의한 시각적 상식으로<br/>
						영상에서 보이지 않는 부분을 복원하는 기술</h3>
					
				</section>

			<!-- Main -->
				<section id="main" class="container">
					<ul class="actions special">
						<li><a href="index.html" class="button">과제 개요</a></li>
						<li><a href="results.html" class="button">결과물</a></li>
						<li><a href="demo1.html" class="button primary">통합 시연</a></li>
						<li><a href="demo2.html" class="button">개별 시연</a></li>
					</ul>
					<br/>
					
					<div class="box">
						<span class="image featured"><img src="images/demo1-1.png" alt="" /></span>
						.
					</div>
					
					<!--
					<div class="box" id="button_box">
						<ul class="actions special">
							<li><a href="#box1" class="button">Part 1</a></li>
							<li><a href="#box2" class="button">Part 2</a></li>
							<li><a href="#box3" class="button">Part 3</a></li>
							<li><a href="#box4" class="button">Part 4</a></li>
						</ul>
					</div>
					-->
			
					<section class="box special features">
						<div class="features-row">
							<section>
								<a href="#box1">
									<h3>Part 1</h3>
									<p>객체의 의도, 관계성을 상식화하는 기술</p>
									</a>
							</section>
							<section>
								<a href="#box2">
								<h3>Part 2</h3>
								<p>객체의 기능, 외형, 속성 등을 상식화하는 기술</p>
								</a>
							</section>
						</div>
						<div class="features-row">
							<section>
								<a href="#box3">
								<h3>Part 3</h3>
								<p>복원될 객체의 영상 정보를 활용하여 환경과의 영상 관계를 연상 (추론)하는 기술</p>
								</a>
							</section>
							<section>
								<a href="#box4">
								<h3>Part 4</h3>
								<p>시각적 상식 기반으로 사물의 영상 형상/구조 및 색상을 복원하는 기술</p>
								</a>
							</section>
						</div>
					</section>
					
					
					<div class="box" id="box1">
						<h3>Part 1</h3>
						<p><span><img src="images/back.jpg" alt=""  style="max-width: 40%; height: auto; float: right"/></span>
						Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent.
						<br/><br/>
						<input type="file" id="file1" accept="image/*" onchange="setThumbnail(event, '#image_container1');"/>
						<input id="submit_1" type="submit" onclick="postDocker(event, '1', '10011', 'image_contents', '')">
						<div id="image_container1"></div> 
						
						</p>
						
						<h4>결과</h4>
						<pre id=jsonresults1>json results
	json results
		json results</pre>
						
					</div>

					<div class="box" id="box2">
						<h3>Part 2</h3>
						<p><span><img src="images/back.jpg" alt=""  style="max-width: 40%; height: auto; float: right"/></span>
						Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent.
						<br/><br/>
						<input type="file" id="file2" accept="image/*" onchange="setThumbnail(event, '#image_container2');"/>
						<input id="submit_2" type="submit" onclick="postDocker(event, '2', '10021', 'image_contents', 'scene_graph')">
						<div id="image_container2"></div> 
						
						</p>
						
						<h4>결과</h4>
						<pre id=jsonresults2>json results
	json results
		json results</pre>
						
					</div>

					<div class="box" id="box3">
						<h3>Part 3</h3>
						<p><span><img src="images/back.jpg" alt=""  style="max-width: 40%; height: auto; float: right"/></span>
						Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent.
						<br/><br/>
						<input type="file" id="file3" accept="image/*" onchange="setThumbnail(event, '#image_container3');"/>
						<input id="submit_3" type="submit" onclick="postDocker(event, '3', '10031', 'scene_graph', '')">
						<div id="image_container3"></div> 
						
						</p>
						
						<h4>결과</h4>
						<pre id=jsonresults3>json results
	json results
		json results</pre>
						
					</div>
					
					<div class="box" id="box4">
						<h3>Part 4</h3>
						<p><span><img src="images/back.jpg" alt=""  style="max-width: 40%; height: auto; float: right"/></span>
						Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent.
						<br/><br/>
						<input type="file" id="file4" accept="image/*" onchange="setThumbnail(event, '#image_container4');"/>
						<input id="submit_4" type="submit" onclick="postDocker(event, '4', '10041', 'image_contents', 'scene_graph')">
						<div id="image_container4"></div> 
						
						</p>
						
						<h4>결과</h4>
						<pre id=jsonresults4>json results
	json results
		json results</pre>
						
					</div>
					
					
					
					<b>Buttons for test</b><br/>

					<button type="submit" id="dockerget">Docker GET TEST</button><br/><br/>
					<p id="show"></p>
					
					<script>
						function setThumbnail(event, image_area) {
							var reader = new FileReader(); 
							reader.onload = function(event) { 
								var img = document.createElement("img"); 
								img.setAttribute("src", event.target.result); 
								img.setAttribute("style", "max-width: 100%; height: auto;");
								$(image_area).empty();
								document.querySelector(image_area).appendChild(img); 
							}; 
							reader.readAsDataURL(event.target.files[0]); 
						}

						// ex) postDocker(event, '1', '10011', 'image_contents', '')
						function postDocker(event, num, port_num, data_key1, data_key2) {
							input_url = "http://127.0.0.1:" + port_num + "/api/run"

							// 이미지가 input으로 들어갈 때. (Part 1,2,4)
							var reader = new FileReader(); 
							var img = document.getElementById("file"+num).files[0];
							try {
								reader.readAsDataURL(img);
							}
							catch(err) {
								// 이미지를 선택하지 않고 Submit 버튼을 눌렀을 경우
								alert("이미지를 선택하세요.");
							}
							reader.onload = function() {
								$('#jsonresults'+num).html("loading...");
								var base64image = "";
								
								if (num == 1 || num == 2 || num == 4) {
									base64image = reader.result;
									var commaIndex = base64image.indexOf(",");
									base64image = base64image.slice(commaIndex+1);
								}
								var jsonArray = new Object();
								if (data_key1 == 'image_contents' && data_key2 == '') {
									jsonArray[data_key1] = base64image;
								} else if (data_key1 == 'image_contents' && data_key2 == 'scene_graph') {
									jsonArray[data_key1] = base64image;
									jsonArray[data_key2] = "abab";
								} else { // data_key1 == 'scene_graph' && data_key2 == ''
									jsonArray[data_key1] = "abab";
								}
								jsonArray = JSON.stringify(jsonArray);
								$.ajax({
									type: "POST",
									url: input_url,
									data: jsonArray,
									success:function(data){
										if(num == "1" || num == "4") {
											var obj = JSON.parse(data);
											var resultImage = document.createElement("img"); 
											resultImage.setAttribute("src", 'data:image/png;base64,' + obj.image_contents); 
											resultImage.setAttribute("style", "max-width: 100%; height: auto;");
											$('#image_container'+num).empty();
											document.querySelector('#image_container'+num).appendChild(resultImage); 

											resultJson = obj.scene_graph;
											$('#jsonresults'+num).html("");
											$('#jsonresults'+num).html(resultJson);
										} else {
											$('#jsonresults'+num).html(data);
										}
									},
									error:function(data){
										//$('#jsonresults'+num).html(JSON.stringify(data));
										alert(JSON.stringify(data));
									}
								});
							};
						}

						// docker GET
						$(function(){
						  $('#dockerget').click(function(){
							$('#show').html('....loading...');
							
							$.ajax({
								type: "GET",
								url: "http://127.0.0.1:10011/api/task_name",
								success:function(data){
									$('#show').html(JSON.stringify(data));
								},
								error:function(){
									alert('GET Failure')
								}
							})
						  })
						})

						/*
						POST 주소들
						Part 1 - POSTECH (10011)
						url: "http://127.0.0.1:10011/api/run",
						data: JSON.stringify({'image_contents' : base64image})
						
						Part 2 - Birmingham (10021)
						url: "http://127.0.0.1:10021/api/run",
						data: JSON.stringify({'image_contents' : base64image, 'scene_graph': 'json_data'})
						
						Part 2 - UNIST (10022)
						url: "http://127.0.0.1:10022/api/run",
						data: JSON.stringify({'image_contents' : base64image, 'scene_graph': 'json_data'})
						
						Part 3 - KAIST (10032)
						url: "http://127.0.0.1:10032/api/run",
						data: JSON.stringify({'scene_graph': 'json_data'})
						
						Part 3 - KETI (10031)
						url: "http://127.0.0.1:10031/api/run",
						data: JSON.stringify({'scene_graph': 'json_data'})
						
						Part 4 - POSTECH (10041)
						url: "http://127.0.0.1:10041/api/run",
						data: JSON.stringify({'image_contents' : base64image, 'scene_graph': 'json_data'})
						단, 이미지 파일이 선택되어있어야 에러 안남

						Part 4 - SNU (10042)
						url: "http://127.0.0.1:10042/api/run",
						data: JSON.stringify({'image_contents' : base64image, 'scene_graph': 'json_data'})
						단, 이미지 파일이 선택되어있어야 에러 안남
						*/
					</script>
					
				</section>
				
				
			<!-- Footer -->
				<footer id="footer">
					<ul class="copyright">
						<li>&copy; KETI. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</footer>

		</div>
				
		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.dropotron.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>
	</body>
</html>