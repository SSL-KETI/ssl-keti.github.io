<!DOCTYPE HTML>
<!--
	Verti by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>SSL</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
	</head>
	<body class="is-preload homepage">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header-wrapper" style="background-color: white;">
					<header id="header" class="container">

						<!-- Logo -->
							<div id="logo">
								<h1><a href="index2.html" style="background-color: white;"><strong style="color:#002178">SSL</strong></a></h1>
							</div>

						<!-- Nav -->
							<nav id="nav">
								<ul>
									<li><a href="index2.html">과제 개요</a></li>
									<li class="current">
										<a href="demo1.html">통합시연</a>
										<ul>
											<li><a href="demo1-12.html">Part 1</a></li>
											<li><a href="demo1-12.html#box2">Part 2</a></li>
											<li><a href="demo1-3.html">Part 3</a></li>
											<li><a href="demo1-4.html">Part 4</a></li>
										</ul>
									</li>
									<li>
										<a href="opensource.html">오픈소스</a>
										<ul>
											<li><a href="opensource.html">데이터셋</a></li>
											<li><a href="opensource2.html">Downstream Task</a></li>
										</ul>
									</li>
									<li><a href="contact.html">CONTACT</a></li>
								</ul>
							</nav>

					</header>
				</div>

			<!-- Main -->
			<div class="container" style="text-align: center;">
				<br/><br/>
				<h2 style="text-align: center; font-weight: 130; margin-bottom: 0.8em;">통합시연</h2>
				<hr color="black" width="10%" size="4px">
				<br/><br/>
				<div>
					<a href="demo1-12.html"><img src="images/home_1.png" onmouseover="this.src='images/home_1_fade.png'" onmouseout="this.src='images/home_1.png'" style="width: 25.33%; vertical-align: top;"></a><a href="demo1-3.html"><img src="images/home_2.png" onmouseover="this.src='images/home_2_fade.png'" onmouseout="this.src='images/home_2.png'" style="width: 46.74%; vertical-align: top;"></a><a href="demo1-4.html"><img src="images/home_3.png"  onmouseover="this.src='images/home_3_fade.png'" onmouseout="this.src='images/home_3.png'" style="width: 27.93%; vertical-align: top;"></a>
				</div>
				<button onclick="location.href='demo1.html'" style="width: 95%; background-color: #002178;">통합 시연</button>
				<br/><br/><br/>
			</div>

			<div id="main-wrapper" style="background-color: white;">
				<div class="container" id="box4">
					<h2 style="font-weight: 130; margin-bottom: 0.8em;">Part 4</h2>
					<hr color="black" width="10%" size="4px" style="margin-left: 0px;">
					<br/>
					<div style="font-size: 1.2em">상식 융합 장면그래프를 활용해 객체의 형태와 구조를 사실적으로 복원하고 생성</div>
					<br/><br/>
					<button onclick="location.href='demo1-4.html#box4'" style="width: 50%; min-height: 3em; background-color: #002178;">이미지 복원</button><button style="width: 50%; min-height: 3em; border: 0.2em solid black; border-bottom: none; color: black; background-color: white;">얼굴 복원</button>
					<br/><br/><br/><br/>
					<strong>이미지 파일 : &nbsp;&nbsp;&nbsp;</strong>
					<input type="file" id="file_img4" accept="image/*" onchange="setImageThumbnail(event, '#image_container4');"/>
					<br/><br/>
					<strong>마스크 파일 : &nbsp;&nbsp;&nbsp;</strong>
					<input type="file" id="file_mask4" accept="image/*" onchange="setImageThumbnail(event, '#mask_container4');"/>
					<br/><br/>
					<strong>Semantic 파일 : &nbsp;&nbsp;&nbsp;</strong>
					<input type="file" id="file_semantic4" accept="image/*" onchange="setImageThumbnail(event, '#semantic_container4')"/>
					<br/><br/>

					<div style="visibility: hidden">
						<input type="checkbox" id="checkbox_postech" name="postech">
						<label style="font-size: 1.5em">Postech</label> &nbsp;&nbsp;&nbsp;&nbsp;
						<input type="checkbox" id="checkbox_snu" name="snu" checked>
						<label style="font-size: 1.5em">SNU</label> &nbsp;&nbsp;&nbsp;&nbsp;
						<!--
						<input type="checkbox" id="checkbox_keti" name="keti">
						<label for="keti" style="font-size: 1.5em">KETI</label>
						-->
					</div>

					<br/>
					<input id="submit_4" type="submit" value="Run" onclick="submitData(event, 4)" style="background-color: #002178; padding: 10px 17px 10px 17px">
					<br/><br/>
					<h4>파일 미리보기</h4>
					<div class="row">
						<div class="column">
							이미지
							<div id="image_container4"><img src="examples/2023/part4_face_input.jpg" style="max-width:100%;"></div>
						</div>
						<div class="column">
							마스크
							<div id="mask_container4"><img src="examples/2023/part4_face_mask.png" style="max-width:100%;"></div>
						</div>
						<div class="column">
							Semantic 정보
							<div id="semantic_container4"><img src="examples/2023/part4_face_label.png" style="max-width:100%;"></div>
						</div>
					</div>
					<br/>
					<hr style="height:10px; background-color:gray;">
					<h4>결과</h4>
					<div id="json_results4">image result</div>
					<div id="image_result4_snu"></div>
				</div>
			</div>

			<script>
				function submitData(event, num) {
					var hasImage = false;
					var hasImage2 = false;
					var hasSemantic = false;
					var readerImg = new FileReader();
					var readerMask = new FileReader();
					var readerSemantic = new FileReader();

					var checked_boxes = ['part4_SNU'];

					var file_check_img = $("#file_img4").val();
					var file_check_mask = $("#file_mask4").val();
					var file_check_semantic = $("#file_semantic4").val();
					// 파일을 넣지 않을 경우
					if(!file_check_img && !file_check_mask && !file_check_semantic) {
						img_url = 'examples/2023/part4_face_input.jpg';
						mask_url = 'examples/2023/part4_face_mask.png';
						semantic_url = 'examples/2023/part4_face_label.png';
						getBase64ImageFromURLThreeImages(input_url, num, img_url, mask_url, semantic_url, checked_boxes);
					}
					// 파일을 넣을 경우
					else if(file_check_img && file_check_mask && file_check_semantic) {
						var img = document.getElementById("file_img4").files[0];
						var mask = document.getElementById("file_mask4").files[0];
						var semantic = document.getElementById("file_semantic4").files[0];
						
						readerImg.readAsDataURL(img);
						readerMask.readAsDataURL(mask);
						readerSemantic.readAsDataURL(semantic);

						var base64image = null;
						var base64mask = null;
						var base64semantic = null;
    					var imageLoadCount = 0;
						var jsonArray = new Object();
						
						readerImg.onload = function() {
							base64image = getBase64Image(readerImg);
							imageLoadCount += 1;
							if (imageLoadCount == 3) {
            					writeThreeImagesInJsonAndPost(base64image, base64mask, base64semantic);
							}
						}
						readerMask.onload = function() {
							base64mask = getBase64Image(readerMask);
							imageLoadCount += 1;
							if (imageLoadCount == 3) {
            					writeThreeImagesInJsonAndPost(base64image, base64mask, base64semantic);
							}
						}
						readerSemantic.onload = function() {
							base64semantic = getBase64Image(readerSemantic);
							imageLoadCount += 1;
							if (imageLoadCount == 3) {
            					writeThreeImagesInJsonAndPost(base64image, base64mask, base64semantic);
							}
						}
					}
					else {
						if(!file_check_img) {
							alert("이미지를 선택하세요.");
						}
						if(!file_check_mask) {
							alert("마스크를 선택하세요.");
						}
						if(!file_check_semantic) {
							alert("Semantic 정보를 선택하세요.");
						}
					}
				}
			</script>

			<!-- Footer -->
			<div id="footer-wrapper">
				<footer id="footer" class="container">
					<div class="row">
						<div class="col-3 col-6-medium col-12-small">

							<!-- Links -->
								<section class="widget links">
									<h3><a href="index2.html">과제 개요</a></h3>
								</section>

						</div>
						<div class="col-3 col-6-medium col-12-small">

							<!-- Links -->
								<section class="widget links">
									<h3><a href="demo1.html">통합시연</a></h3>
									<ul class="style2">
										<li><a href="demo1-12.html">Part 1</a></li>
										<li><a href="demo1-12.html#box2">Part 2</a></li>
										<li><a href="demo1-3.html">Part 3</a></li>
										<li><a href="demo1-4.html">Part 4</a></li>
									</ul>
								</section>

						</div>
						<div class="col-3 col-6-medium col-12-small">

							<!-- Links -->
								<section class="widget links">
									<h3><a href="opensource.html">오픈소스</a></h3>
									<ul class="style2">
										<li><a href="opensource.html">데이터셋</a></li>
										<li><a href="opensource2.html">Downstream Task</a></li>
									</ul>
								</section>

						</div>
						<div class="col-3 col-6-medium col-12-small">

							<!-- Links -->
								<section class="widget links">
									<h3><a href="contact.html">CONTACT</a></h3>
								</section>

						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<div id="copyright">
								<ul class="menu">
									<li>&copy; KETI. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
								</ul>
							</div>
						</div>
					</div>
				</footer>
			</div>

			</div>

		<!-- Scripts -->

			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="assets/js/arbor.js"></script>
			<script src="assets/js/thumbnail.js"></script>
			<script src="assets/js/main_connection_info.js"></script>
			<script src="assets/js/main_connection.js"></script>

	</body>
</html>
